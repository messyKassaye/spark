{"ast":null,"code":"var _jsxFileName = \"D:\\\\projects\\\\spark\\\\spark_front\\\\src\\\\home\\\\Login.js\";\nimport React from 'react';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      const {\n        formData\n      } = this.state;\n      formData[event.target.name] = event.target.value;\n      this.setState(formData);\n    };\n\n    this.closeDialog = () => {\n      this.props.showMainDialog({\n        show: false,\n        maxWidth: 'sm',\n        page: null,\n        title: ``,\n        actions: {\n          on: false,\n          path: '',\n          id: ''\n        }\n      });\n    };\n\n    this.handleSubmit = event => {\n      this.setState({\n        submitted: true,\n        loading: true\n      });\n      const {\n        formData\n      } = this.state;\n      axios.post(`${API_AUTH_URL}login`, formData, {\n        headers: {\n          'content-type': 'Application/json'\n        },\n        timeout: 1000 * 5\n      }).then(res => res.data).then(response => {\n        set(response.token);\n        this.props.history.push('/auth');\n        window.location.reload();\n      }).catch(onerror => {\n        if (!onerror.response) {\n          this.setState({\n            errorMessage: 'networkError'\n          });\n          this.setState({\n            loading: false,\n            finished: false,\n            submitted: false\n          });\n        } else {\n          let code = onerror.response.status;\n\n          if (code === 403) {\n            setData(formData);\n            this.props.history.push('/auth');\n            window.location.reload();\n          }\n\n          this.setState({\n            loading: false,\n            finished: false,\n            submitted: false\n          });\n        }\n      });\n    };\n\n    this.state = {\n      formData: {\n        email: '',\n        password: '',\n        phone: ''\n      },\n      submitted: false,\n      loading: false,\n      finished: false,\n      errorMessage: ''\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    });\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["D:/projects/spark/spark_front/src/home/Login.js"],"names":["React","Login","Component","constructor","props","handleChange","event","formData","state","target","name","value","setState","closeDialog","showMainDialog","show","maxWidth","page","title","actions","on","path","id","handleSubmit","submitted","loading","axios","post","API_AUTH_URL","headers","timeout","then","res","data","response","set","token","history","push","window","location","reload","catch","onerror","errorMessage","finished","code","status","setData","email","password","phone","render"],"mappings":"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","sourcesContent":["import React from 'react'\r\n\r\nclass Login extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            formData:{\r\n                email:'',\r\n                password:'',\r\n                phone:''\r\n            },\r\n            submitted: false,\r\n            loading: false,\r\n            finished: false,\r\n            errorMessage: ''\r\n        }\r\n    }\r\n\r\n    handleChange = (event)=>{\r\n        const {formData} = this.state\r\n        formData[event.target.name] = event.target.value\r\n        this.setState(formData)\r\n    }\r\n\r\n    closeDialog = ()=>{\r\n        this.props.showMainDialog({\r\n            show:false,\r\n            maxWidth:'sm',\r\n            page:null,\r\n            title:``,\r\n            actions:{\r\n                on:false,\r\n                path:'',\r\n                id:''\r\n            }\r\n        })\r\n    }\r\n\r\n    handleSubmit = (event)=>{\r\n        this.setState({\r\n            submitted: true,\r\n            loading: true\r\n        })\r\n\r\n        const {formData} =this.state\r\n\r\n        axios.post(`${API_AUTH_URL}login`, formData, {\r\n            headers: {\r\n                'content-type': 'Application/json'\r\n            },\r\n            timeout:1000*5,\r\n        })\r\n            .then((res) => res.data)\r\n            .then((response) => {\r\n                set(response.token)\r\n                this.props.history.push('/auth')\r\n                window.location.reload()\r\n            })\r\n            .catch(onerror=>{\r\n                if(!onerror.response){\r\n                    this.setState({errorMessage:'networkError'})\r\n                    this.setState({\r\n                        loading: false,\r\n                        finished: false,\r\n                        submitted: false,\r\n                    })\r\n                }else {\r\n                    let code = onerror.response.status\r\n                    if(code===403){\r\n                        setData(formData)\r\n                        this.props.history.push('/auth')\r\n                        window.location.reload()\r\n                    }\r\n                    this.setState({\r\n                        loading: false,\r\n                        finished: false,\r\n                        submitted: false,\r\n                    })\r\n                }\r\n\r\n            })\r\n    }\r\n    \r\n    render() {\r\n        return (\r\n            <div>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}