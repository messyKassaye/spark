{"ast":null,"code":"var _jsxFileName = \"D:\\\\projects\\\\spark\\\\spark_front\\\\src\\\\home\\\\Login.js\";\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport createAccountStyle from './styles/createAccountStyle';\nimport LoadingButton from '../authentication/commons/LoadingButton';\nimport axios from 'axios';\nimport { TextValidator, ValidatorForm } from 'react-material-ui-form-validator';\nimport { AccountCircle, PhoneAndroidRounded, PhoneCallback, PhoneCallbackSharp, PhoneCallbackTwoTone } from '@material-ui/icons';\nimport { API_AUTH_URL } from '../../constants/constants';\nimport { set, setData } from '../TokenService';\nimport { connect } from 'react-redux';\nimport { showMainDialog } from '../../authentication/commons/state/actions/dialogActions';\nimport LogoComponent from '../authentication/commons/LogoComponent';\nimport { withRouter } from 'react-router-dom';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      const {\n        formData\n      } = this.state;\n      formData[event.target.name] = event.target.value;\n      this.setState(formData);\n    };\n\n    this.closeDialog = () => {\n      this.props.showMainDialog({\n        show: false,\n        maxWidth: 'sm',\n        page: null,\n        title: ``,\n        actions: {\n          on: false,\n          path: '',\n          id: ''\n        }\n      });\n    };\n\n    this.handleSubmit = event => {\n      this.setState({\n        submitted: true,\n        loading: true\n      });\n      const {\n        formData\n      } = this.state;\n      axios.post(`${API_AUTH_URL}login`, formData, {\n        headers: {\n          'content-type': 'Application/json'\n        },\n        timeout: 1000 * 5\n      }).then(res => res.data).then(response => {\n        set(response.token);\n        this.props.history.push('/auth');\n        window.location.reload();\n      }).catch(onerror => {\n        if (!onerror.response) {\n          this.setState({\n            errorMessage: 'networkError'\n          });\n          this.setState({\n            loading: false,\n            finished: false,\n            submitted: false\n          });\n        } else {\n          let code = onerror.response.status;\n\n          if (code === 403) {\n            setData(formData);\n            this.props.history.push('/auth');\n            window.location.reload();\n          }\n\n          this.setState({\n            loading: false,\n            finished: false,\n            submitted: false\n          });\n        }\n      });\n    };\n\n    this.state = {\n      formData: {\n        email: '',\n        password: '',\n        phone: ''\n      },\n      submitted: false,\n      loading: false,\n      finished: false,\n      errorMessage: ''\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    });\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["D:/projects/spark/spark_front/src/home/Login.js"],"names":["React","withStyles","createAccountStyle","LoadingButton","axios","TextValidator","ValidatorForm","AccountCircle","PhoneAndroidRounded","PhoneCallback","PhoneCallbackSharp","PhoneCallbackTwoTone","API_AUTH_URL","set","setData","connect","showMainDialog","LogoComponent","withRouter","Login","Component","constructor","props","handleChange","event","formData","state","target","name","value","setState","closeDialog","show","maxWidth","page","title","actions","on","path","id","handleSubmit","submitted","loading","post","headers","timeout","then","res","data","response","token","history","push","window","location","reload","catch","onerror","errorMessage","finished","code","status","email","password","phone","render"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport withStyles from '@material-ui/core/styles/withStyles'\r\nimport createAccountStyle from './styles/createAccountStyle'\r\nimport LoadingButton from '../authentication/commons/LoadingButton'\r\nimport axios from 'axios'\r\nimport { TextValidator, ValidatorForm } from 'react-material-ui-form-validator'\r\nimport { AccountCircle, PhoneAndroidRounded, PhoneCallback, PhoneCallbackSharp, PhoneCallbackTwoTone } from '@material-ui/icons'\r\nimport { API_AUTH_URL } from '../../constants/constants'\r\nimport { set, setData } from '../TokenService'\r\nimport {connect} from 'react-redux'\r\nimport {showMainDialog} from '../../authentication/commons/state/actions/dialogActions'\r\nimport LogoComponent from '../authentication/commons/LogoComponent'\r\nimport { withRouter } from 'react-router-dom'\r\n\r\nclass Login extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            formData:{\r\n                email:'',\r\n                password:'',\r\n                phone:''\r\n            },\r\n            submitted: false,\r\n            loading: false,\r\n            finished: false,\r\n            errorMessage: ''\r\n        }\r\n    }\r\n\r\n    handleChange = (event)=>{\r\n        const {formData} = this.state\r\n        formData[event.target.name] = event.target.value\r\n        this.setState(formData)\r\n    }\r\n\r\n    closeDialog = ()=>{\r\n        this.props.showMainDialog({\r\n            show:false,\r\n            maxWidth:'sm',\r\n            page:null,\r\n            title:``,\r\n            actions:{\r\n                on:false,\r\n                path:'',\r\n                id:''\r\n            }\r\n        })\r\n    }\r\n\r\n    handleSubmit = (event)=>{\r\n        this.setState({\r\n            submitted: true,\r\n            loading: true\r\n        })\r\n\r\n        const {formData} =this.state\r\n\r\n        axios.post(`${API_AUTH_URL}login`, formData, {\r\n            headers: {\r\n                'content-type': 'Application/json'\r\n            },\r\n            timeout:1000*5,\r\n        })\r\n            .then((res) => res.data)\r\n            .then((response) => {\r\n                set(response.token)\r\n                this.props.history.push('/auth')\r\n                window.location.reload()\r\n            })\r\n            .catch(onerror=>{\r\n                if(!onerror.response){\r\n                    this.setState({errorMessage:'networkError'})\r\n                    this.setState({\r\n                        loading: false,\r\n                        finished: false,\r\n                        submitted: false,\r\n                    })\r\n                }else {\r\n                    let code = onerror.response.status\r\n                    if(code===403){\r\n                        setData(formData)\r\n                        this.props.history.push('/auth')\r\n                        window.location.reload()\r\n                    }\r\n                    this.setState({\r\n                        loading: false,\r\n                        finished: false,\r\n                        submitted: false,\r\n                    })\r\n                }\r\n\r\n            })\r\n    }\r\n    \r\n    render() {\r\n        return (\r\n            <div>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}